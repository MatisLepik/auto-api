name: windscreen
name_cased: windscreen
category: chassis

identifier:
  msb: 0x00
  lsb: 0x42

api:
  intro: 4
  update: 11

getters: {}

setters:
  - name: set_windscreen_damage
    mandatory: [0x03]
    optional: [0x05]
  - name: set_windscreen_replacement_needed
    mandatory: [0x06]
  - name: control_wipers
    mandatory: [0x01]
    optional: [0x02]

state: all

properties:
  - id: 0x01
    name: wipers
    name_cased: wipers
    type: enum
    size: 1
    enum_values:
      - id: 0x00
        name: inactive
        verb: deactivate
      - id: 0x01
        name: active
        verb: activate
      - id: 0x02
        name: automatic
    examples:
      - hex: '02'
        value: 'automatic'
        description: Windscreen wipers are set to automatic mode
  - id: 0x02
    name: wipers_intensity
    name_cased: wipersIntensity
    type: enum
    size: 1
    enum_values:
      - id: 0x00
        name: level_0
        pretty_name: Level 0, inactive
      - id: 0x01
        name: level_1
      - id: 0x02
        name: level_2
      - id: 0x03
        name: level_3
    examples:
      - hex: '03'
        value: 'level_3'
        description: Wipers are on highest intensity, indicating heavy rain
  - id: 0x03
    name: windscreen_damage
    name_cased: windscreenDamage
    type: enum
    size: 1
    enum_values:
      - id: 0x00
        name: no_impact_detected
      - id: 0x01
        name: impact_but_no_damage_detected
      - id: 0x02
        name: damage_smaller_than_1_inch
      - id: 0x03
        name: damage_larger_than_1_inch
    examples:
      - hex: '01'
        value: 'impact_but_no_damage_detected'
        description: Windscreen detected an impact, but no damage
  - id: 0x04
    name: windscreen_zone_matrix
    name_cased: windscreenZoneMatrix
    type: types.zone
    description: Representing the size of the matrix, seen from the inside of the vehicle
    examples:
      - hex: '0403'
        values:
          horizontal: 4
          vertical: 3
        description: Windscreen is divided into a matrix 4 columns horizontally by 3 rows vertically
  - id: 0x05
    name: windscreen_damage_zone
    name_cased: windscreenDamageZone
    type: types.zone
    description: Representing the position in the zone, seen from the inside of the vehicle (1-based index)
    examples:
      - hex: '0102'
        values:
          horizontal: 1
          vertical: 2
        description: Damage is detected in the 1st column from left and the 2nd row from the top
  - id: 0x06
    name: windscreen_needs_replacement
    name_cased: windscreenNeedsReplacement
    type: enum
    size: 1
    enum_values:
      - id: 0x00
        name: unknown
      - id: 0x01
        name: no_replacement_needed
      - id: 0x02
        name: replacement_needed
    examples:
      - hex: '01'
        value: 'no_replacement_needed'
        description: Windscreen does not need replacement
  - id: 0x07
    name: windscreen_damage_confidence
    name_cased: windscreenDamageConfidence
    type: types.percentage
    description: Confidence of damage detection, 0% if no impact detected
    examples:
      - hex: '3fee666666666666'
        value: 0.95
        description: Damage detected with 95% confidence
  - id: 0x08
    name: windscreen_damage_detection_time
    name_cased: windscreenDamageDetectionTime
    type: timestamp
    size: 8
    description: Milliseconds since UNIX Epoch time
    examples:
      - hex: '000001598938e788'
        value: '2017-01-10T16:32:05.000Z'
        description: Windscreen damage detected at 10 January 2017 at 16:32:05 UTC
